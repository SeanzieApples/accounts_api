# Accounts API

## Approach

Since this exercise was a simple API, I researched what Python framework was the fastest. Based on my research it seemed like FastAPI was the way to go so I chose that. One other benefit to FastAPI is it provdes a Swagger doc baked in and autogenerated based on your routes and docstrings.

I then spent some time reading over the documentation and referencing best practices for creating a clear project structure. It seemed like the best way to go about creating a simple API was to have the following simply because it separates concerns into clear files/classes:
# Base folder that provided the application configuration and settings via a Settings class.
## Currently this only defines the App Name and the DB connection string
# A crud folder for any operations that were performed against the database, broken up by models.
## Currently this only defines the Account crud operations and logic
# A db folder, which set up and provided database connections
## Currently this creates the database connection and provides an easy method to grab it
# A models folder that used the SQLAlchemy ORM to map models to tables.
## Currently only defines the Account model
### This model validates that the name is no longer than 255 characters, has a unique name (case insensitve), and is not nullable
### It also validates that we store any balances with a decimal precision of 2 and at most 13 digits. It also sets a default to 0.00 if undefined.
### This model will also validate that the balance does not go below 0 and will throw an exception as we do not want to overdraw
### I also added an additional case-insensitive uniqueness index to prevent saving duplicate account names
# A routers folder that for storing all the rest routes for specific models
## This simply defines all the routes available for the accounts endpoints.
## It also catches errors early on so we can return something nice before it goes haywire further down
# A schemas folder to define the structure of objects we expect to receive and return via json.
## AccountBase defines the minimum we need to create an account and persist to the db
## DepositWithdraw defines what we expect the deposit/withdraw request json bodies to look like
## Account defines what the account object will look like when read from the database and mapped to and object

Besides the project structure I went with SQLLite for my database as this provided the simplest way to spin up a database on the fly. 
The SQLAclhemy library is database agnostic, which is why I chose it for the ORM library. One could prepare a database of their chosing and change the SQLALCHEMY_DATABASE_URL config setting beforehand.

**Description**:  AccountsAPI is an interface create and manage bank accounts
Other things to include:

## Dependencies

Requires: Python 3.10, pip3.10
Optional: Docker

## Installation

On Windows simply run the `startup.bat`
On MacOS or Linux run `./startup.sh`
The project also includes a Dockerfile which can be run with `./start_docker.bat` or `./start_docker.sh`

Once running you can use curl or Postman to hit the API on http://localhost:8080

## Usage

Once the API is running you have the following actions available

```
POST http://localhost:8080/accounts
REQUEST BODY EXAMPLE: {"name": "Account Name"}
```
Creates an account with the given name

```
GET http://localhost:8080/accounts/:account_name
```
Gets an account with the given name

```
POST http://localhost:8080/accounts/:account_name/deposit
REQUEST BODY EXAMPLE: {"amount": 10.00}
```
Desposits specified amount

```
POST http://localhost:8080/accounts/:account_name/deposit
REQUEST BODY EXAMPLE: {"amount": 10.00}
```
Withdraws specified amount

## Getting help

Once running you can reference the Swagger doc and try the API out here: http://localhost:8080/docs#/default